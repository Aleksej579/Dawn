{{ '0-breadcrumb.out.css' | asset_url | stylesheet_tag }}

{%- unless template.name == 'index' or template.name == 'cart' or template.name == 'list-collections' or template.name == '404' -%}

  <nav class="page-width breadcrumbs{% if section.settings.capitalize %} breadcrumbs--capitalize{% endif %}" aria-label="Breadcrumbs">
    <ol class="breadcrumbs__list">

      {%- comment -%} Home link {%- endcomment -%}
      {%- if section.settings.show_home -%}
        <li class="breadcrumbs__item">
          <a class="breadcrumbs__link" href="{{ routes.root_url }}">
            {%- if section.settings.show_home_icon -%}
              <svg class="breadcrumbs__icon" viewBox="0 0 16 16" fill="none">
                <path d="M2 6L8 2L14 6V13C14 13.55 13.55 14 13 14H3C2.45 14 2 13.55 2 13V6Z" stroke="currentColor" stroke-width="1.5"/>
                <path d="M6 14V8H10V14" stroke="currentColor" stroke-width="1.5"/>
              </svg>
            {%- endif -%}
            <span>{{ section.settings.home_title | default: 'Home' }}</span>
          </a>
        </li>
      {%- endif -%}

      {%- comment -%} Collection link {%- endcomment -%}
      {%- if collection -%}
        {%- if section.settings.separator != 'none' -%}
          <li class="breadcrumbs__separator breadcrumbs__separator--{{ section.settings.separator }}"></li>
        {%- endif -%}
        <li class="breadcrumbs__item">
          <a class="breadcrumbs__link" href="{{ collection.url }}">{{ collection.title }}</a>
        </li>
      {%- endif -%}

      {%- comment -%} Current page {%- endcomment -%}
      {%- if section.settings.separator != 'none' -%}
        <li class="breadcrumbs__separator breadcrumbs__separator--{{ section.settings.separator }}"></li>
      {%- endif -%}

      <li class="breadcrumbs__item">
        <span class="breadcrumbs__link breadcrumbs__link--active">
          {%- if product -%}
            {{ product.title }}
          {%- elsif page -%}
            {{ page.title }}
          {%- elsif article -%}
            {{ article.title }}
          {%- else -%}
            {{ page_title }}
          {%- endif -%}
        </span>
      </li>

    </ol>
  </nav>

{%- endunless -%}

{% schema %}
{
  "name": "Breadcrumbs",
  "settings": [
    {
      "type": "checkbox",
      "id": "show_home",
      "label": "Show home link",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_home_icon",
      "label": "Show home icon",
      "default": false
    },
    {
      "type": "text",
      "id": "home_title",
      "label": "Home link text",
      "default": "Home"
    },
    {
      "type": "checkbox",
      "id": "capitalize",
      "label": "Capitalize breadcrumbs",
      "default": false
    },
    {
      "type": "select",
      "id": "separator",
      "label": "Separator",
      "options": [
        { "value": "slash", "label": "/" },
        { "value": "chevron", "label": "›" },
        { "value": "arrow", "label": "→" },
        { "value": "dot", "label": "•" },
        { "value": "none", "label": "None" }
      ],
      "default": "chevron"
    }
  ],
  "presets": [
    {
      "name": "Breadcrumbs",
      "category": "Custom"
    }
  ]
}
{% endschema %}
